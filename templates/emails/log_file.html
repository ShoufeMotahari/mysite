{% extends "admin/base_site.html" %}
{% load static %}

{% block title %}Email Log File{% endblock %}

{% block content %}
<h1>Email Log File</h1>

{% if error %}
    <div style="background: #ffecec; color: #d8000c; padding: 10px; border-radius: 5px; margin-bottom: 20px;">
        <strong>Error:</strong> {{ error }}
        {% if searched_paths %}
            <p>Searched paths:</p>
            <ul>
                {% for path in searched_paths %}
                    <li>{{ path }}</li>
                {% endfor %}
            </ul>
        {% endif %}
    </div>
{% else %}
    <p><strong>Log file path:</strong> {{ log_file_path }}</p>
    <p><strong>Total lines loaded:</strong> {{ line_count }}</p>

    <pre style="background: #f8f8f8; padding: 15px; border: 1px solid #ccc; border-radius: 5px; overflow-x: auto; max-height: 700px;">
{{ log_content }}
    </pre>
{% endif %}

<a href="{% url 'emails:dashboard' %}" style="display: inline-block; margin-top: 20px; padding: 8px 15px; background: #4CAF50; color: white; text-decoration: none; border-radius: 4px;">Back to Dashboard</a>
{% endblock %}
